
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function Person(name) {
            this.name = name;
        };
        function myNew(fn, ...args) {
            // 创建一个全新的对象，这个对象的__proto__要指向构造函数的原型对象
            const instance = Object.create(fn.prototype);
            // 执行构造函数
            const result = fn.apply(instance, args);
            // 返回值为object类型则作为new方法的返回值返回，否则返回上述全新对象
            return typeof result === 'object' ? result : instance;
        };
        // const person = myNew(Person, 'hcc');
        // console.log(person);
        function myInstanceof(left, right) {
            const proto = Object.getPrototypeOf(left);
            while (left) {
                if (proto === null) {
                    return false;
                };
                if (proto === right.prototype) {
                    return true;
                };
                proto = Object.getPrototypeOf(proto);
            };
        };
        const person = new Person();
        console.log(myInstanceof(person, Person));
        function myCreate(proto) {
            function Fn() {};
            Fn.prototype = proto;
            Fn.prototype.constructor = Fn;
            return new Fn();
        };
        const demo = {
            name: 'hcc'
        };
        console.log(myCreate(demo));
    </script>
</body>
</html>